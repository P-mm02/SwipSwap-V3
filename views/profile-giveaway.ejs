<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="home.css">
    <link rel="stylesheet" href="profile.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
  <body>
    <div id="navigation"></div>

    <div class="row mainBord">
        <div class="col-md-5">
            <div id="profileWindow"></div>
        </div>
        <div class="col-md-7" id="myProfilePage">
            <div class="row">
                <div class="col-md-5">
                    <!--ปุ่ม Dealing/Offer ด้านบน-->
                    <div class="row mainTab">
                        <div class="col-6 mainTab1 d-flex align-items-center justify-content-center pt-2" id="myProduct">                            
                            <a href="#" class="btn" >
                                <h3>Dealing</h3>
                            </a>
                        </div>
                        <div class="col-6 mainTab2 d-flex align-items-center justify-content-center pt-2" id="editProfile">
                            <a href="#" class="btn" >
                                <h3>Offer</h3>
                            </a>
                        </div>
                    </div>
                </div>
                <!--แสดง product ที่ dealing/offer-->
                <div class="col-md-7"></div>

                <!--profile_Give_Dealing-->
                <div class="col-10 mt-5 " style="background-color: #fff;position: relative; visibility: visible; ;" id="myProductList">
                    <div class="row buttomLine2" style="background-color: #fff;">                        
                        <div class="showMockUp col-3 d-flex align-items-center justify-content-center ">
                            <img src="/img/items/product.png" alt="" class="showMockUp img-fluid">
                        </div>
                        <div class="showMockUp col-3 d-flex align-items-start justify-content-center flex-column">
                            <h4 class="" style="color: #2B468B;">Care bare blue</h4>
                            <h5 style="color: #2B468B;">Category : Enjoyment </h5>
                            <h5 style="color: #2B468B;">Condition : 75% </h5>
                            <h5 style="color: #2B468B;">Shipment : pick up </h5>
                        </div>   
                        <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                            <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                            <h5 class="">Owner : Sasiwimol </h5> <span style="display: none;">6109616666</span>
                            <h5 class="">Recipient : Kanin </h5> <span style="display: none;">6109616666</span>
                            </a>
                        </div>
                        <div class="col-2 d-flex align-items-center justify-content-center " style="flex-direction: column;">
                            <!--<img src="/img/profile/profile-swap/img_profileSwap_02.png" alt="" class="img-fluid mt-2">-->
                            <button class="btn mt-2">
                                <a href="/contact">
                                    <img src="/img/img_contact_2.png" alt="" class="img-fluid" style="width: 50px; height: 50px;">
                                </a>                                
                            </button> 
                        </div>
                        <!-- <div class="row">
                            <div class="col-md-9"></div>
                            <div class="col-md-3 mb-3 mt-3 d-flex align-items-center justify-content-end">
                                <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                <i class="fa-solid fa-star" style="color: #e4e6ed; font-size: 30px;" ></i>
                            </div>
                        </div>                         -->
                        
                    </div>
                    <% profile_Give_Dealing_MyItems.forEach((profile_Give_Dealing_MyItems,index) => { %>
    
                        <div class="row buttomLine2" style="background-color: #fff;">                        
                            <div class="showMockUp col-3 d-flex align-items-center justify-content-center ">
                                <img src="/img/uploads/<%= profile_Give_Dealing_MyItems.img2 %>" alt="" class="showMockUp img-fluid">
                            </div>
                            <div class="showMockUp col-3 d-flex align-items-start justify-content-center flex-column">
                                <h4 class="" style="color: #2B468B;"><%= profile_Give_Dealing_MyItems.nameItem %></h4>
                                <h5 style="color: #2B468B;">Category : <%= profile_Give_Dealing_MyItems.category %> </h5>
                                <h5 style="color: #2B468B;">Condition : <%= profile_Give_Dealing_MyItems.condition %>% </h5>
                                <h5 style="color: #2B468B;">Shipment : <%= profile_Give_Dealing_MyItems.shipment %> </h5>
                            </div>   
                            <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                                <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                                <h5 class="">Owner : <%= profile_Give_Dealing_MyItems.nameOwner %> </h5> <span style="display: none;"><%= profile_Give_Dealing_MyItems.idOwner %></span>
                                <h5 class="">Recipient : <%= profile_Give_Dealing_Offerer[index].name %> </h5> <span style="display: none;"><%= profile_Give_Dealing_Offerer[index].username %></span>
                                </a>
                            </div>
                            <div class="col-2 d-flex align-items-center justify-content-center " style="flex-direction: column;">
                                <!--<img src="/img/profile/profile-swap/img_profileSwap_02.png" alt="" class="img-fluid mt-2">-->
                                <form action="/contact" method="post">

                                    <input name="ItemID" type="text" id="myItemID<%= index %>" value="<%= profile_Give_Dealing_MyItems._id %>" style="display: none;">
                        
                                    <button class="btn mt-2" type="submit" style="border: none; background: none;">
                                        <img src="/img/img_contact_2.png" alt="" style="width: 50px; height: 50px;">                         
                                    </button>
                                </form> 
                            </div>
                            <!-- <div class="row">
                                <div class="col-md-9"></div>
                                <div class="col-md-3 mb-3 mt-3 d-flex align-items-center justify-content-end">
                                    <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                    <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                    <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                    <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                    <i class="fa-solid fa-star" style="color: #e4e6ed; font-size: 30px;" ></i>
                                </div>
                            </div>                         -->
                            
                        </div>

                        <% }); %>                 
                </div>
                
                <!--profile_Give_Offer-->                
                <div class="col-10 mt-5" id="editProfileList" style="display: none; ">
                    <div class="container mb-3">
                        <button class="btn btn-primary" id="offerSelectBtn1" >My Offer</button>
                        <button class="btn btn-primary" id="offerSelectBtn2" >Receive an offer </button>                                                
                    </div>
                    
                <!--ปุ่ม MyOffer/Recieve an offer-->

                    <!--profile_Give_Offer_MyOffer-->  
                    <div id="offerSelectBtn1Con">
                        <div class="row buttomLine2" style="background-color: #fff;">
                            <div class="showMockUp col-3 d-flex align-items-center justify-content-center itemInfoActive">
                                <img src="/img/profile/profile-history/profile_favorite_01.jpeg" alt="" class="showMockUp img-fluid">

                            </div>
                            <div class="showMockUp col-4 d-flex align-items-start justify-content-center flex-column itemInfoActive">
                                <h4 class="" style="color: #2B468B;">CareBear Blue</h4>
                                <h5 style="color: #2B468B;">Category : Enjoyment</h5>
                                <h5 style="color: #2B468B;">Condition : 75% </h5>
                                <h5 style="color: #2B468B;">Shipment : pick up </h5>
                            </div>
                        <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                            <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                            <h5 class="">Owner : Sasiwimol </h5> <span style="display: none;">6109616666</span>
                            <h5 class="">Recipient : Kanin </h5> <span style="display: none;">6109616666</span>
                            </a>
                        </div>
                        <div class="col-1 d-flex align-items-center justify-content-center">
                            <form action="/items/delete" method="post">
                                <button style="border: none; background: none;">
                                    <img src="/img/profile/img_profile_09.png" alt="" class="img-fluid">
                                </button>
                            </form>
                            
                        </div>
                    </div>
                        <% profile_Give_Offer_MyOffer_TargetItems.forEach((profile_Give_Offer_MyOffer_TargetItems,index) => { %>

                            <div class="row buttomLine2" style="background-color: #fff;"> 
                                
                                <span id="swapGiveInfoId<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems._id %></span>
                                    <span id="swapGiveInfoCategory<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.category %></span>
                                    <span id="swapGiveInfoCondition<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.condition %></span>
                                    <span id="swapGiveInfoShipment<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.shipment %></span>
                                    <span id="swapGiveInfoInteresting<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.interesting %></span>
                                    <span id="swapGiveInfoDescription<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.description %></span>
                                    <span id="swapGiveInfoOwnerName<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.nameOwner %></span>
                                    <span id="swapGiveInfoOwnerRating<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.ratingOwner %></span>
                                    <span id="swapGiveInfoItemName<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.nameItem %></span>
                                    <span id="swapGiveInfoItemDate<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.date %></span>
                                    <span id="swapGiveInfoItemDate<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.idOwner %></span>
                                    <span id="swapGiveIndex" style="display: none;"><%= index %></span>
            
                                    <span id="swapGiveUserId<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_MyID[index].username %></span>
                                    <span id="swapGiveUserName<%= index %>" style="display: none;"><%= profile_Give_Offer_MyOffer_MyID[index].name %></span>
                                    <span id="swapGiveIndex" style="display: none;"><%= index %></span>
        
                                <div class="col-3 d-flex align-items-center justify-content-center itemInfoActive">
                                    <img src="/img/uploads/<%= profile_Give_Offer_MyOffer_TargetItems.img2 %>" alt="" class="img-fluid">
                                </div>
                                <div class="col-4 d-flex align-items-start justify-content-center flex-column itemInfoActive">
                                    <h4 class="" style="color: #2B468B;"><%= profile_Give_Offer_MyOffer_TargetItems.nameItem %></h4>
                                    <h5 style="color: #2B468B;">Category : <%= profile_Give_Offer_MyOffer_TargetItems.category %></h5>
                                    <h5 style="color: #2B468B;">Condition : <%= profile_Give_Offer_MyOffer_TargetItems.condition %> </h5>
                                    <h5 style="color: #2B468B;">Shipment : <%= profile_Give_Offer_MyOffer_TargetItems.shipment %> </h5>
                                </div>   
                                <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                                    <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                                    <h5 class="">Owner : <%= profile_Give_Offer_MyOffer_TargetItems.nameOwner %> </h5> <span style="display: none;"><%= profile_Give_Offer_MyOffer_TargetItems.idOwner %></span>
                                    <h5 class="">Recipient : <%= profile_Give_Offer_MyOffer_MyID[index].name %> </h5> <span style="display: none;"><%= profile_Give_Offer_MyOffer_MyID[index].username %></span>
                                    </a>
                                </div>
                                <div class="col-1 d-flex align-items-center justify-content-center">
                                    <form action="/DeleteGiveOffer" method="post">
                                    
                                        <input name="ItemID" type="text" id="myItemID<%= index %>" value="<%= profile_Give_Offer_MyOffer_TargetItems._id %>" style="display: none;">
                                        <input name="OfferorID" type="text" id="OfferorID<%= index %>" value="<%= profile_Give_Offer_MyOffer_MyID[index].username %>" style="display: none;">
              
                                        <button class="btn DeleteGiveOfferBtn" type="button" >
                                            <img src="/img/profile/img_profile_09.png" alt="" class="img-fluid">
                                        </button> 
                                    </form>
                                    
                                </div>
                            </div>
        
                        <% }); %>
                    </div>

                    <!--profile_Give_Offer_ReceiveAnOffer-->
                    <div id="offerSelectBtn2Con">
                        <div class="row buttomLine2" style="background-color: #fff;">
                            <div class="showMockUp col-3 d-flex align-items-center justify-content-center itemInfoActive">
                                <img src="/img/profile/profile-history/profile_favorite_01.jpeg" alt="" class="showMockUp img-fluid">

                            </div>
                            <div class="showMockUp col-4 d-flex align-items-start justify-content-center flex-column itemInfoActive">
                                <h4 class="" style="color: #2B468B;">CareBear Blue</h4>
                                <h5 style="color: #2B468B;">Category : Enjoyment</h5>
                                <h5 style="color: #2B468B;">Condition : 75% </h5>
                                <h5 style="color: #2B468B;">Shipment : pick up </h5>
                            </div>
                        <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                            <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                            <h5 class="">Owner : Sasiwimol </h5> <span style="display: none;">6109616666</span>
                            <h5 class="">Recipient : Kanin </h5> <span style="display: none;">6109616666</span>
                            </a>
                        </div>
                        <div class="col-1 d-flex align-items-center justify-content-center">
                            <form action="/items/delete" method="post">
                                <button style="border: none; background: none;">
                                    <img src="/img/profile/img_profile_09.png" alt="" class="img-fluid">
                                </button>
                            </form>
                            
                        </div>
                    </div>
                        <% profile_Give_Offer_ReceiveAnOffer_MyItems.forEach((profile_Give_Offer_ReceiveAnOffer_MyItems,index) => { %>

                            <div class="row buttomLine2 DeleteGiveOfferCon" style="background-color: #fff;"> 
                                
                                <span id="swapGiveInfoId<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems._id %></span>
                                    <span id="swapGiveInfoCategory<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.category %></span>
                                    <span id="swapGiveInfoCondition<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.condition %></span>
                                    <span id="swapGiveInfoShipment<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.shipment %></span>
                                    <span id="swapGiveInfoInteresting<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.interesting %></span>
                                    <span id="swapGiveInfoDescription<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.description %></span>
                                    <span id="swapGiveInfoOwnerName<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.nameOwner %></span>
                                    <span id="swapGiveInfoOwnerRating<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.ratingOwner %></span>
                                    <span id="swapGiveInfoItemName<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.nameItem %></span>
                                    <span id="swapGiveInfoItemDate<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.date %></span>
                                    <span id="swapGiveInfoItemDate<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.idOwner %></span>
                                    <span id="swapGiveIndex" style="display: none;"><%= index %></span>
            
                                    <span id="swapGiveUserId<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].username %></span>
                                    <span id="swapGiveUserName<%= index %>" style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].name %></span>
                                    <span id="swapGiveIndex" style="display: none;"><%= index %></span>
        
                                <div class="col-3 d-flex align-items-center justify-content-center itemInfoActive">
                                    <img src="/img/uploads/<%= profile_Give_Offer_ReceiveAnOffer_MyItems.img2 %>" alt="" class="img-fluid">
                                </div>
                                <div class="col-4 d-flex align-items-start justify-content-center flex-column itemInfoActive">
                                    <h4 class="" style="color: #2B468B;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.nameItem %></h4>
                                    <h5 style="color: #2B468B;">Category : <%= profile_Give_Offer_ReceiveAnOffer_MyItems.category %></h5>
                                    <h5 style="color: #2B468B;">Condition : <%= profile_Give_Offer_ReceiveAnOffer_MyItems.condition %> </h5>
                                    <h5 style="color: #2B468B;">Shipment : <%= profile_Give_Offer_ReceiveAnOffer_MyItems.shipment %> </h5>
                                </div>   
                                <div class="col-4 d-flex align-items-center justify-content-center flex-column mt-3 mb-3" style="border-left: 1px solid #AFAFAF;">
                                    <a id="ownerNameLink" href="/userInfo"  style="text-decoration: none;">
                                    <h5 class="">Owner : <%= profile_Give_Offer_ReceiveAnOffer_MyItems.nameOwner %> </h5> <span style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_MyItems.idOwner %></span>
                                    <h5 class="">Recipient : <%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].name %> </h5> <span style="display: none;"><%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].username %></span>
                                    </a>
                                </div>
                                <div class="col-1 d-flex align-items-center justify-content-center flex-column">
                                    <form action="/makeGiveawayDeal" method="post" id="makeGiveawayDeal">

                                        <input name="myID" type="text" id="myID" value="<%= profile_Give_Offer_ReceiveAnOffer_MyItems.idOwner %>" style="display: none;">
                                        <input name="myItemID" type="text" id="myItemID" value="<%= profile_Give_Offer_ReceiveAnOffer_MyItems._id %>" style="display: none;">
                                        <input name="offerorID" type="text" id="offerorID" value="<%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].username %>" style="display: none;">
    
                                        <button class="btn mb-5" type="button" onclick="confirmOffer()">
                                            <img src="/img/items/img_itemInfo_offer_02.png" alt="" class="img-fluid">
                                        </button>
                                        <script>
                                            function confirmOffer() {
                                                if (confirm("Are you sure you want to accept this offer?")) {
                                                    document.getElementById('makeGiveawayDeal').submit();
                                                } else {
                                                    // User canceled, do nothing
                                                }
                                            }
                                        </script>
                                    </form>
                                    <form action="/DeleteGiveOffer" method="post">
                                    
                                        <input name="ItemID" type="text" id="myItemID<%= index %>" value="<%= profile_Give_Offer_ReceiveAnOffer_MyItems._id %>" style="display: none;">
                                        <input name="OfferorID" type="text" id="OfferorID<%= index %>" value="<%= profile_Give_Offer_ReceiveAnOffer_Offerer[index].username %>" style="display: none;">
              
                                        <button class="btn DeleteGiveOfferBtn" type="button" >
                                            <img src="/img/profile/img_profile_09.png" alt="" class="img-fluid">
                                        </button> 
                                    </form>
                                    
                                </div>
                                <!-- <div class="row">
                                    <div class="col-md-9"></div>
                                    <div class="col-md-3 mb-3 mt-3 d-flex align-items-center justify-content-end">
                                        <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                        <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                        <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                        <i class="fa-solid fa-star" style="color: #fbc77f; font-size: 30px;" ></i>
                                        <i class="fa-solid fa-star" style="color: #e4e6ed; font-size: 30px;" ></i>
                                    </div>
                                </div>                         -->
                                
                            </div>
        
                        <% }); %>
                    </div>
                    
                </div>
            </div>
        </div>        
    </div>

    <%- include('itemInfo-swap.ejs') %>

    <style>
        #myProfileNav3{
            color: #F99746;
        }
        #offerSelectBtn1,#offerSelectBtn2{
            background-color: #707070;
            border: none;
        }
        #offerSelectBtn1:hover,#offerSelectBtn2:hover{
            background-color: #444242;
            border: none;
        }
        #ownerNameLink{
            color: #2B468B;
        }
        #ownerNameLink:hover{
            color: #6479ae;
        }

        #offerSelectBtn2Con{
            display: none;
        }
        .showMockUp{
            cursor: pointer;
        }
    </style>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="profile.js"></script>
    <script src="nav2.js"></script>
    <script>
        document.getElementById('offerSelectBtn1').onclick = function() {
            document.getElementById('offerSelectBtn1').style.background = '#444242'
            document.getElementById('offerSelectBtn2').style.background = '#707070'

            document.getElementById('offerSelectBtn1Con').style.display = 'block'
            document.getElementById('offerSelectBtn2Con').style.display = 'none'
        }
        document.getElementById('offerSelectBtn2').onclick = function() {
            document.getElementById('offerSelectBtn1').style.background = '#707070'
            document.getElementById('offerSelectBtn2').style.background = '#444242'

            document.getElementById('offerSelectBtn2Con').style.display = 'block'
            document.getElementById('offerSelectBtn1Con').style.display = 'none'
        }
       
        document.querySelector('.showMockUp').onclick = function() { 
                var itemInfoContainer = document.getElementById('itemInfoContainer');
                itemInfoContainer.style.display = 'block';
            };
       
    </script>
    <script>
        document.querySelectorAll('.DeleteGiveOfferBtn').forEach(function(DeleteGiveOfferBtn) {            
            DeleteGiveOfferBtn.addEventListener('click', function () {                
                if (confirm("Are you sure you want to delete this offer?")) {
                    let DeleteGiveOfferForm = this.closest('form');
                    if (DeleteGiveOfferForm) {
                        DeleteGiveOfferForm.submit();
                    } else {
                        console.error("Form not found for DeleteSwapOfferBtn");
                    }
                } else {
                    // User canceled, do nothing
                }
            });
        });
    </script>
  </body>
</html>