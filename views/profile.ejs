<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>profile</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/home.css">
    <link rel="stylesheet" href="/profile.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
  <body>
    <div id="navigation"></div>
    
    <div class="row mainBord">
        <div class="col-md-5">            
            <div id="profileWindow"></div>           
        </div>
        <div class="col-md-7" id="myProfilePage">
            <div class="row">
                <div class="col-md-5">
                    <div class="row mainTab">
                        <div class="col-6 mainTab1 d-flex align-items-center justify-content-center pt-2" id="myProduct">                            
                            <a href="#" class="btn" >
                                <h4>Profile</h4>
                            </a>
                        </div>
        <!--แสดง listmy product-->
                        <div class="col-6 mainTab2 d-flex align-items-center justify-content-center pt-2" id="editProfile">
                            <a href="#" class="btn" >
                                <h4>My product</h4>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-7"></div>
            <!--My Product-->
                <div class="col-7 mt-5 " style="display: none; background-color: #fff;position: relative; visibility: visible; ;" id="editProfileList">
                    <div class="row buttomLine2" >
                        <div class="col-2">
                            <img src="/img/profile/img_profile_07.png" alt="" style="position: absolute; left: 0;">
                        </div>
                        <div class="col-3 d-flex align-items-center justify-content-center itemInfoActive">
                            <img src="/img/profile/img_profile_08.png" alt="" class="mt-3 mb-3">
                        </div>
                        <div class="col-4 itemInfoActive">
                            <h4 class="mt-3" style="color: #2B468B;">Airpod3</h4>
                            <h5 style="color: #AFAFAF;">Condition : 75% </h5>
                            <h5 style="color: #AFAFAF;">Date : 15/12/2023</h5>
                        </div>
                        <div class="col-2 d-flex align-items-center justify-content-center" >
                            <!-- <h4 style="color: #AFAFAF;">Edit</h4> -->
                        </div>
                        <div class="col-1 d-flex align-items-center justify-content-center">
                            <img src="/img/profile/img_profile_09.png" alt="">
                        </div>
                    </div>                    
                    <% myProductDisplay.forEach((myProductDisplay,index) => { %>
                        <div class="row buttomLine2">
                            <span id="swapGiveIndex" style="display: none;"><%= index %></span>
                            <span id="swapGiveInfoItemName<%= index %>" style="display: none;"><%= myProductDisplay.nameItem %></span>
                            <span id="swapGiveInfoCategory<%= index %>" style="display: none;"><%= myProductDisplay.category %></span>
                            <span id="swapGiveInfoCondition<%= index %>" style="display: none;"><%= myProductDisplay.condition %></span>
                            <span id="swapGiveInfoShipment<%= index %>" style="display: none;"><%= myProductDisplay.shipment %></span>
                            <span id="swapGiveInfoInteresting<%= index %>" style="display: none;"><%= myProductDisplay.interesting %></span>
                            <span id="swapGiveInfoDescription<%= index %>" style="display: none;"><%= myProductDisplay.description %></span>
                            <span id="swapGiveInfoOwnerName<%= index %>" style="display: none;"><%= myProductDisplay.nameOwner %></span>
                            <span id="swapGiveInfoOwnerRating<%= index %>" style="display: none;"><%= myProductDisplay.ratingOwner %></span>
                            <span id="swapGiveInfoImg2<%= index %>" style="display: none;"><%= myProductDisplay.img2 %></span>
                            <div class="col-2">
                                <% if (myProductDisplay.type == 'swap') { %>
                                    <img src="/img/profile/img_profile_07.png" alt="" style="position: absolute; left: 0;">
                                <% } else { %>
                                    <img src="/img/profile/img_profile_12.png" alt="" style="position: absolute; left: 0;">
                                <% } %>                                
                            </div>
                            <div class="col-3 d-flex align-items-center justify-content-center itemInfoActive">
                                <img src="/img/uploads/<%= myProductDisplay.img2 %>" alt="" class="img-fluid">
                            </div>
            <!--แสดงข้อมูลของ product-->
                            <div class="col-4 itemInfoActive">
                                <h4 class="mt-3" style="color: #2B468B;"><%= myProductDisplay.nameItem %></h4>
                                <h5 style="color: #AFAFAF;">Condition : <%= myProductDisplay.condition %> %</h5>
                                <h5 style="color: #AFAFAF;">Date :<%= myProductDisplay.date %></h5>
                            </div>
                            <div class="col-2 d-flex align-items-center justify-content-center" >
                                <!-- <h4 style="color: #AFAFAF;">Edit</h4> -->
                            </div>
                            <div class="col-1 d-flex align-items-center justify-content-center">
                                <form action="/items/delete/<%= myProductDisplay._id %>" method="POST">
                                    <button class="submitDelete" type="button" style="border: none; background: none;">
                                        <img src="/img/profile/img_profile_09.png" alt="Delete">
                                    </button>
                                </form>                                
                                <script>
                                    submitDelete = document.querySelectorAll('.submitDelete')
                                    submitDelete.forEach(function(element)  {
                                        element.onclick = function() {
                                            if (confirm("Are you sure you want to delete this item?")) {
                                                element.closest('form').submit();
                                            } else {
                                            // User canceled, do nothing
                                            }
                                        };
                                    })
                                </script>                                
                            </div>
                        </div>
                    <% }); %>
                </div>

            <!--แสดงข้อมูลส่วนตัว Profile-->
                <div class="col-7 mt-5" id="myProductList" style="display: block;">
                    <div class="container ">
                        <form action="/profile/editAddress" method="post">
                            <div class="form-group editProfileInput">
                                <h4>ชื่อ:&nbsp;  <%= studentNameTH %></h4>
                                <h4>Name:&nbsp; <%= studentName %></h4>
                                <h4>Email:&nbsp; <%= studentEmail %></h4>
                                <h4>Faculty:&nbsp; <%= studentFaculty %></h4>
                                <h4>Department:&nbsp; <%= studentDepartment %></h4>
                                <h4>Phone Number: <%= phoneNumber  %></h4>
                                <h4>Line App ID: <%= lineID  %></h4>
                                <h4>Contact: <%= addressData  %></h4>

                              
                                <label for="addressInput" ><h4>Update your contact information.</h4></label>
                                <h6 style="color:red;">*IMPORTANT This information is neccessary for a trade part with your partner.</h6>
                                <label for="phone">Phone Number:</label>
                                <input name="phoneNumber" type="text" class="form-control" id="phone" placeholder="Enter phone number" required>
                                <label for="line">Line App ID:</label>
                                <input name="lineID" type="text" class="form-control" id="line" placeholder="Enter Line App ID" required>
                                <textarea name="addressContainer" class="form-control" id="addressInput" rows="3" placeholder="Enter your additional contact information. Ex. Available Time/ Address/ Social media."></textarea>
        
                            </div>
                            <button type="submit" class="btn btn-primary mt-5">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>        
    </div>




<!--ยังไม่รู้ว่าทำอะไร-->
<!--ยังไม่รู้ว่าทำอะไร-->
<!--ยังไม่รู้ว่าทำอะไร-->
<!--ยังไม่รู้ว่าทำอะไร-->
    <%- include('itemInfo-swap.ejs') %>

    <style>
        #myProfileNav1{
            color: #F99746;
        }
    </style>
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="/profile.js"></script>
    <script src="/nav2.js"></script>
    <script>
        document.querySelectorAll('.itemInfoActive').forEach(function(element) {
            element.onclick = function() {
                swapGiveIndex = element.querySelector('#swapGiveIndex').innerText                
                document.getElementById('itemInfoItemName').innerText = element.querySelector('#swapGiveInfoItemName'+swapGiveIndex).innerText
                document.getElementById('itemInfoCategory').innerText = 'Category - ' + element.querySelector('#swapGiveInfoCategory'+swapGiveIndex).innerText
                document.getElementById('itemInfoCondition').innerText = element.querySelector('#swapGiveInfoCondition'+swapGiveIndex).innerText + '%'
                document.getElementById('itemInfoShipment').innerText = element.querySelector('#swapGiveInfoShipment'+swapGiveIndex).innerText
                document.getElementById('itemInfoInteresting').innerText = element.querySelector('#swapGiveInfoInteresting'+swapGiveIndex).innerText
                document.getElementById('itemInfoDescription').innerText = element.querySelector('#swapGiveInfoDescription'+swapGiveIndex).innerText
                document.getElementById('itemInfoOwnerName').innerText = element.querySelector('#swapGiveInfoOwnerName'+swapGiveIndex).innerText
                document.getElementById('itemInfoOwnerRating').innerText = 'Rating : ' + element.querySelector('#swapGiveInfoOwnerRating'+swapGiveIndex).innerText
                document.getElementById('showMockUpImg').src = '/img/uploads/'+element.querySelector('#swapGiveInfoImg2'+swapGiveIndex).innerText

                var itemInfoContainer = document.getElementById('itemInfoContainer');
                itemInfoContainer.style.display = 'block';
            };
        });
    </script>
    <style>
        #clickOffer{
            display: none;
        }
    </style>
  </body>
</html>